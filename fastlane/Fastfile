desc "å‘cocoapodsæäº¤ä»£ç åº“"
lane :eslib do |options|
target_version = options[:version]
project        = options[:project]
path           = "#{project}.podspec"

cocoapods(
clean: true,
podfile: "./Example/Podfile"
)  # pod install é‡æ–°å®‰è£…ä¸€ä¸‹ä»£ç 

# git add .
git_add(path: ".") 

# git commit -m 'xxx'
git_commit(path: ".", message: "æäº¤æœ¬åœ°ä»£ç ") 

# git push origin master
push_to_git_remote 

# è‡ªå®šä¹‰action
if git_tag_exists(tag: target_version)
UI.message("å·²ç»å­˜åœ¨è¿™ä¸ªæ ‡ç­¾, å¤„ç†æ“ä½œ: åˆ é™¤æœ¬åœ°&è¿œç¨‹æ ‡ç­¾#{target_version} ğŸš€")
remove_tag(tagName: target_version, dR:true, dL:true)
end

# git tag -a xx
add_git_tag(tag: target_version) 

# git push --tags
push_git_tags

# pod lib lint
pod_lib_lint(allow_warnings: true) 

# pod trunk push
pod_push(path: path)

end

